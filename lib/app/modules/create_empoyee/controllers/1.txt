  void validateAndSave(
      {required String name, required String departement}) async {
    isFormValid = formKey.currentState!.validate();
    if (!isFormValid) {
      return;
    } else {
      formKey.currentState!.save();
      if (imagePath.isNotEmpty) {
        try {
          FullScreenDialogLoader.showDialog();
          await authRepository
              .uploadEmployeeImage(imagePath.value)
              .then((value) async {
            uploadedFileId = value.$id;
            await authRepository.createEmploye({
              "name": name,
              "departement": departement,
              "createdBy": _getStorage.read("userId"),
              "image": uploadedFileId,
              "createdAt": DateTime.now().toIso8601String()
            }).then((value) {
              FullScreenDialogLoader.cancelDialog();
              CustomSnackBar.showSuccessSnackBar(
                  context: Get.context,
                  title: "Success",
                  message: "Data Saved");
            }).catchError((error) async {
              FullScreenDialogLoader.cancelDialog();
              if (error is AppwriteException) {
                CustomSnackBar.showErrorSnackBar(
                    context: Get.context,
                    title: "Error",
                    message: error.response['message']);
              } else {
                CustomSnackBar.showErrorSnackBar(
                    context: Get.context,
                    title: "Error",
                    message: "Shomething went wrong");
              }
              await authRepository.deleteEmployeeImage(uploadedFileId);
            });
          }).catchError((error) {
            FullScreenDialogLoader.cancelDialog();
            if (error is AppwriteException) {
              CustomSnackBar.showErrorSnackBar(
                  context: Get.context,
                  title: "Error",
                  message: error.response['message']);
            } else {
              CustomSnackBar.showErrorSnackBar(
                  context: Get.context,
                  title: "Error",
                  message: "Shomething went wrong");
            }
          });
        } catch (e) {
          FullScreenDialogLoader.cancelDialog();
          CustomSnackBar.showErrorSnackBar(
              context: Get.context,
              title: "Error",
              message: "Shomething went wrong");
        }
      } else {
        CustomSnackBar.showErrorSnackBar(
            context: Get.context,
            title: "Error",
            message: "Please selection cancelled");
      }
    }
  }